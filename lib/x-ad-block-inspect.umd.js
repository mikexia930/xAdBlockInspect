(function(r,p){typeof exports=="object"&&typeof module<"u"?p(exports):typeof define=="function"&&define.amd?define(["exports"],p):(r=typeof globalThis<"u"?globalThis:r||self,p(r.XAdBlockInspect={}))})(this,function(r){"use strict";var p=(o=>(o.Tags="tags",o.Classnames="classnames",o.Ids="ids",o))(p||{});function h(o,m){function y(n,t){for(const s in t)t.hasOwnProperty(s)&&(typeof t[s]=="object"&&t[s]!==null&&!Array.isArray(t[s])?(n[s]||(n[s]={}),y(n[s],t[s])):n[s]=t[s]||"");return n}let e={popup:{isUse:!0,repeat:{isUse:!0,time:5e3},text:"检测到存在广告屏蔽类插件，为了不影响您的正常访问，建议将本站加入白名单，并刷新页面。",styles:{position:"fixed",left:"0",top:"0",zIndex:"10000",backgroundColor:"rgba(255,72,72,0.95)",padding:"20px",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.1)",textAlign:"center",width:"100%",fontSize:"16px",color:"#fff"}},button:{isUse:!1,text:"知道了",styles:{marginLeft:"12px"}}};m&&(e=y(e,m));let u=null;function b(n){var t,s,a,i;n.style.display="none",(s=(t=e==null?void 0:e.popup)==null?void 0:t.repeat)!=null&&s.isUse&&(u&&(clearTimeout(u),u=null),u=setTimeout(()=>{n.style.display="block"},((i=(a=e==null?void 0:e.popup)==null?void 0:a.repeat)==null?void 0:i.time)||5e3))}function w(n){var s,a,i;const t=document.createElement("button");return t.classList.add("ad-block-inspect-popup-close-btn"),t.textContent=((s=e==null?void 0:e.button)==null?void 0:s.text)||"Confirm",(a=e==null?void 0:e.button)!=null&&a.styles&&typeof((i=e==null?void 0:e.button)==null?void 0:i.styles)=="object"&&Object.keys(e.button.styles).forEach(l=>{var c,d;t.style[String(l)]=((d=(c=e==null?void 0:e.button)==null?void 0:c.styles)==null?void 0:d[String(l)])||""}),t.onclick=()=>{b(n)},t}function x(){var t,s,a,i;const n=document.createElement("div");return(t=e==null?void 0:e.popup)!=null&&t.styles&&typeof((s=e==null?void 0:e.popup)==null?void 0:s.styles)=="object"&&Object.keys(e.popup.styles).forEach(l=>{var c,d;n.style[String(l)]=((d=(c=e==null?void 0:e.popup)==null?void 0:c.styles)==null?void 0:d[String(l)])||""}),n.classList.add("ad-block-inspect-popup"),n.innerHTML=((a=e==null?void 0:e.popup)==null?void 0:a.text)||"No prompt text set",(i=e==null?void 0:e.button)!=null&&i.isUse?n.appendChild(w(n)):n.onclick=()=>{b(n)},n}function k(n){return new Promise((t,s)=>{const a=new Image;a.onload=function(){t(!0)},a.onerror=function(i){s(i)},a.src=n})}async function P(n){let t=!0;for(const s of n)if(await k(s).then(()=>{t=!0}).catch(()=>{t=!1}),t)break;return t}function O(n,t){return new Promise((s,a)=>{let i=!1;n==="ids"?i=!!document.getElementById(t):n==="tags"?i=!!document.getElementsByTagName(t):n==="classnames"&&(i=!!document.getElementsByClassName(t)),i?s(!0):a(!1)})}async function f(n,t){let s=!0;for(const a of t)if(await O(n,a).then(()=>{s=!0}).catch(()=>{s=!1}),s)break;return s}return new Promise(n=>{document.addEventListener("DOMContentLoaded",async()=>{var s;let t=!0;t&&o.hasOwnProperty("images")&&o.images&&o.images.length>0&&(t=await P(o.images)),t&&o.hasOwnProperty("dom")&&o.dom&&(t&&o.dom.hasOwnProperty("tags")&&(t=await f("tags",o.dom.tags)),t&&o.dom.hasOwnProperty("classnames")&&(t=await f("classnames",o.dom.classnames)),t&&o.dom.hasOwnProperty("ids")&&(t=await f("ids",o.dom.ids))),!t&&((s=e==null?void 0:e.popup)!=null&&s.isUse)&&document.body.appendChild(x()),n(t)})})}r.EnumInspectDomType=p,r.adBlockInspect=h,Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})});
